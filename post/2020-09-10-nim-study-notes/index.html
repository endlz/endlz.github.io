<html>

<head>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Nim Manual Study Notes | 3ND</title>
<link rel="shortcut icon" href="https://3nd.xyz/favicon.ico?v=1627869141145">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://3nd.xyz/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Nim Manual Study Notes | 3ND - Atom Feed" href="https://3nd.xyz/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="Nim æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ã€ç¼–è¯‘å‹ã€ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚å®ƒç»“åˆäº†å…¶ä»–æˆç†Ÿè¯­è¨€çš„æˆåŠŸæ¦‚å¿µã€‚ï¼ˆå¦‚ Pythonã€Ada å’Œ Modulaï¼‰
è¯æ³•å…ƒç´ 
Nim è¯æ³•å…ƒç´ ç”±ï¼ˆå­—ç¬¦ä¸²ï¼‰å­—é¢å€¼ã€æ ‡è¯†ç¬¦ã€å…³é”®å­—ã€æ³¨é‡Šã€æ“ä½œç¬¦ã€å’Œå…¶å®ƒæ ‡ç‚¹ç¬¦å·æ„æˆã€‚
å­—ç¬¦ä¸²å’Œå­—ç¬¦å­—..." />
    <meta name="keywords" content="Notes,Nim" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <!--<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>-->
    <script src="/media/highlight.min.js"></script>
</head>

<body>
  <div class="main">
    <div class="main-content">
      <div class="site-header">
  <a href="https://3nd.xyz">
  <img class="avatar" src="https://3nd.xyz/images/avatar.png?v=1627869141145" alt="">
  </a>
  <h1 class="site-title">
    3ND
  </h1>
  <p class="site-description">
    å¤ãŒçµ‚ã‚ã£ãŸ
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    <a href="https://github.com/inspiringz" target="_blank">
      <i class="ri-github-fill"></i>
    </a>
    <a href="mailto:z@3nd.xyz" target="_blank">
      <i class="ri-mail-send-fill"></i>
  </a>
  <a href="#">
    <i class="ri-fire-fill"></i>
</a>
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Nim Manual Study Notes
            </h2>
            <div class="post-info">
              <span>
                2020-09-10
              </span>
              <span>
                23 min read
              </span>
              <span class="page-view" key="20200910193913" title="Nim Manual Study Notes">
              </span>
              
                <a href="https://3nd.xyz/tag/notes/" class="post-tag">
                  # Notes
                </a>
                
                <a href="https://3nd.xyz/tag/nim/" class="post-tag">
                  # Nim
                </a>
                
            </div>
            
                <div class="post-content-wrapper">
                  <div class="post-content">
                    <p>Nim æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ã€ç¼–è¯‘å‹ã€ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚å®ƒç»“åˆäº†å…¶ä»–æˆç†Ÿè¯­è¨€çš„æˆåŠŸæ¦‚å¿µã€‚ï¼ˆå¦‚ Pythonã€Ada å’Œ Modulaï¼‰</p>
<h2 id="è¯æ³•å…ƒç´ ">è¯æ³•å…ƒç´ </h2>
<p>Nim è¯æ³•å…ƒç´ ç”±ï¼ˆå­—ç¬¦ä¸²ï¼‰å­—é¢å€¼ã€æ ‡è¯†ç¬¦ã€å…³é”®å­—ã€æ³¨é‡Šã€æ“ä½œç¬¦ã€å’Œå…¶å®ƒæ ‡ç‚¹ç¬¦å·æ„æˆã€‚</p>
<h3 id="å­—ç¬¦ä¸²å’Œå­—ç¬¦å­—é¢é‡">å­—ç¬¦ä¸²å’Œå­—ç¬¦å­—é¢é‡</h3>
<p>å­—ç¬¦ä¸²å­—é¢å€¼é€šè¿‡åŒå¼•å·æ‹¬èµ·æ¥ï¼›å­—ç¬¦å­—é¢å€¼ç”¨å•å¼•å·ã€‚ç‰¹æ®Šå­—ç¬¦é€šè¿‡ <code>\</code> è½¬ä¹‰: <code>\n</code> è¡¨ç¤ºæ¢è¡Œï¼Œ <code>\t</code> è¡¨ç¤ºåˆ¶è¡¨ç¬¦ç­‰.</p>
<pre><code class="language-nim">r&quot;C:\program files\nim&quot; # åŸå§‹å­—ç¬¦ä¸²å­—é¢é‡ï¼Œ\ ä¸è½¬ä¹‰
'''hello\world''' # é•¿å­—ç¬¦ä¸²å­—é¢é‡ï¼Œ\ ä¸è½¬ä¹‰
</code></pre>
<h3 id="æ³¨é‡Š">æ³¨é‡Š</h3>
<ul>
<li>
<p>å•è¡Œæ³¨é‡Šï¼š<code>#</code>ã€æ–‡æ¡£æ³¨é‡Š <code>##</code></p>
</li>
<li>
<p>å¤šè¡Œæ³¨é‡Šï¼š<code>#[....]#</code>ã€<code>discard '''xxxx'''</code></p>
</li>
</ul>
<h3 id="æ•°å­—">æ•°å­—</h3>
<ul>
<li>ä¸‹åˆ’çº¿ï¼š<code>1_000_000</code> ä¸€ç™¾ä¸‡</li>
<li>æµ®ç‚¹å­—é¢å€¼ï¼š<code>1.0e9</code> åäº¿</li>
<li>è¿›åˆ¶ï¼š<code>0b</code> <code>0o</code> <code>0x</code></li>
</ul>
<h2 id="var-è¯­å¥">var è¯­å¥</h2>
<pre><code class="language-nim">var x, y: int # å£°æ˜ x å’Œ y æ‹¥æœ‰ç±»å‹ ``int``
var
  x, y: int
  # å¯ä»¥æœ‰æ³¨é‡Š
  a, b, c: string
</code></pre>
<h2 id="èµ‹å€¼è¯­å¥">èµ‹å€¼è¯­å¥</h2>
<pre><code class="language-nim">var x = &quot;abc&quot; # å¼•å…¥ä¸€ä¸ªæ–°å˜é‡ `x` å¹¶ä¸”èµ‹å€¼ç»™å®ƒ
x = &quot;xyz&quot;     # èµ‹æ–°å€¼ç»™ `x`
var x, y = 3  # ç»™å˜é‡ `x` å’Œ `y` èµ‹å€¼ 3
</code></pre>
<h2 id="å¸¸é‡">å¸¸é‡</h2>
<pre><code class="language-nim">const x = &quot;abc&quot;
const
  x = 1
  # è¿™ä¹Ÿå¯ä»¥æœ‰æ³¨é‡Š
  y = 2
  z = y + 5 # è®¡ç®—æ˜¯å¯èƒ½çš„
</code></pre>
<h2 id="let-è¯­å¥">let è¯­å¥</h2>
<p>let è¯­å¥åƒ var è¯­å¥ä¸€æ ·ä½†å£°æ˜çš„ç¬¦å·æ˜¯ <code>å•èµ‹å€¼</code> å˜é‡ï¼šåˆå§‹åŒ–åå®ƒä»¬çš„å€¼å°†ä¸èƒ½æ”¹å˜ã€‚</p>
<pre><code class="language-nim">let x = &quot;abc&quot; # å¼•å…¥ä¸€ä¸ªæ–°å˜é‡ `x` å¹¶ç»‘å®šä¸€ä¸ªå€¼
x = &quot;xyz&quot;     # éæ³•: ç»™ `x` èµ‹å€¼
</code></pre>
<p>let å’Œ const çš„åŒºåˆ«åœ¨äº: let å¼•å…¥ä¸€ä¸ªå˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼ã€‚ const è¡¨ç¤º <strong>å¼ºåˆ¶ç¼–è¯‘æœŸæ±‚å€¼å¹¶æ”¾å…¥æ•°æ®æ®µ</strong>:</p>
<pre><code class="language-nim">const input = readLine(stdin) # é”™è¯¯: éœ€è¦å¸¸é‡è¡¨è¾¾å¼
let input = readLine(stdin)   # å¯ä»¥
</code></pre>
<h2 id="æµç¨‹æ§åˆ¶è¯­å¥">æµç¨‹æ§åˆ¶è¯­å¥</h2>
<h3 id="if-è¯­å¥">if è¯­å¥</h3>
<pre><code class="language-nim">let name = readLine(stdin)
if name == &quot;&quot;:
  echo &quot;Poor soul, you lost your name?&quot;
elif name == &quot;name&quot;:
  echo &quot;Very funny, your name is name.&quot;
else:
  echo &quot;Hi, &quot;, name, &quot;!&quot;
</code></pre>
<h3 id="case-è¯­å¥">Case è¯­å¥</h3>
<pre><code class="language-nim">let name = readLine(stdin)
case name
of &quot;&quot;:
  echo &quot;Poor soul, you lost your name?&quot;
of &quot;name&quot;:
  echo &quot;Very funny, your name is name.&quot;
of &quot;Dave&quot;, &quot;Frank&quot;: # å¯¹äºåˆ†æ”¯å…è®¸ä½¿ç”¨é€—å·åˆ†éš”çš„å€¼åˆ—è¡¨
  echo &quot;Cool name!&quot;
else:
  echo &quot;Hi, &quot;, name, &quot;!&quot;
</code></pre>
<p>case è¯­å¥å¯ä»¥å¤„ç†æ•´å‹ã€å…¶å®ƒåºæ•°ç±»å‹å’Œå­—ç¬¦ä¸²ã€‚å¯¹æ•´å‹æˆ–åºæ•°ç±»å‹å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨èŒƒå›´ï¼š</p>
<pre><code class="language-nim">from strutils import parseInt

echo &quot;A number please: &quot;
let n = parseInt(readLine(stdin))
case n
of 0..2, 4..7: echo &quot;The number is in the set: {0, 1, 2, 4, 5, 6, 7}&quot;
of 3, 8: echo &quot;The number is 3 or 8&quot;
else: discard # ç©º discard è¯­å¥ =&gt; ä»€ä¹ˆéƒ½ä¸åš
</code></pre>
<h3 id="while-è¯­å¥">While è¯­å¥</h3>
<pre><code class="language-nim">echo &quot;What's your name? &quot;
var name = readLine(stdin)
while name == &quot;&quot;:
  echo &quot;Please tell me your name: &quot;
  name = readLine(stdin)
</code></pre>
<h3 id="for-è¯­å¥">For è¯­å¥</h3>
<pre><code class="language-nim">echo &quot;Counting to ten: &quot;
for i in countup(1, 10): # å€’æ•°  countdown(10, 1)
  echo i
# --&gt; Outputs 1 2 3 4 5 6 7 8 9 10 on different lines
for i in 1..10: # 1..10
for i in 0..&lt;10: # é›¶ç´¢å¼•è®¡æ•° 0..9 -&gt; for i in 0..&lt;s.len
for index, item in [&quot;a&quot;, &quot;b&quot;].pairs:
  echo item, &quot; at index &quot;, index
# =&gt; a at index 0
# =&gt; b at index 1
</code></pre>
<h3 id="ä½œç”¨åŸŸå’Œå—è¯­å¥">ä½œç”¨åŸŸå’Œå—è¯­å¥</h3>
<pre><code class="language-nim">while false:
  var x = &quot;hi&quot;
echo x # ä¸è¡Œ
block myblock:
  var x = &quot;hi&quot;
echo x # ä¸è¡Œ
</code></pre>
<h3 id="break-è¯­å¥">Break è¯­å¥</h3>
<pre><code class="language-nim">block myblock:
  echo &quot;entering block&quot;
  while true:
    echo &quot;looping&quot;
    break # è·³å‡ºå¾ªç¯,ä½†ä¸è·³å‡ºå—
  echo &quot;still in block&quot;

block myblock2:
  echo &quot;entering block&quot;
  while true:
    echo &quot;looping&quot;
    break myblock2 # è·³å‡ºå— (å’Œå¾ªç¯)
  echo &quot;still in block&quot;
</code></pre>
<h3 id="continue-è¯­å¥">Continue è¯­å¥</h3>
<pre><code class="language-nim">while true:
  let x = readLine(stdin)
  if x == &quot;&quot;: continue
  echo x
</code></pre>
<h3 id="when-è¯­å¥">When è¯­å¥</h3>
<p>when è¯­å¥å‡ ä¹ç­‰ä»·äº if è¯­å¥, ä½†æœ‰ä»¥ä¸‹åŒºåˆ«:</p>
<ul>
<li>æ¯ä¸ªæ¡ä»¶å¿…é¡»æ˜¯å¸¸é‡è¡¨è¾¾å¼ï¼Œå› ä¸ºå®ƒè¢«ç¼–è¯‘å™¨æ±‚å€¼ã€‚</li>
<li>åˆ†æ”¯å†…çš„è¯­å¥ä¸æ‰“å¼€æ–°ä½œç”¨åŸŸã€‚</li>
<li>ç¼–è¯‘å™¨æ£€æŸ¥è¯­ä¹‰å¹¶ä»…ä¸ºå±äºç¬¬ä¸€ä¸ªæ±‚å€¼ä¸º true çš„æ¡ä»¶ç”Ÿæˆä»£ç ã€‚</li>
</ul>
<p>when è¯­å¥åœ¨å†™å¹³å°ç‰¹å®šä»£ç æ—¶æœ‰ç”¨ï¼Œç±»ä¼¼äº C è¯­è¨€ä¸­çš„ <code>#ifdef</code> ç»“æ„ã€‚</p>
<pre><code class="language-nim">when system.hostOS == &quot;windows&quot;:
  echo &quot;running on Windows!&quot;
elif system.hostOS == &quot;linux&quot;:
  echo &quot;running on Linux!&quot;
elif system.hostOS == &quot;macosx&quot;:
  echo &quot;running on Mac OS X!&quot;
else:
  echo &quot;unknown operating system&quot;
</code></pre>
<h2 id="è¯­å¥å’Œç¼©è¿›">è¯­å¥å’Œç¼©è¿›</h2>
<p>ç®€å•è¯­å¥ä¸å¿…ç¼©è¿›ï¼ˆä¸èƒ½åŒ…å«å…¶å®ƒè¯­å¥ï¼šå±äºç®€å•è¯­å¥çš„èµ‹å€¼, è¿‡ç¨‹è°ƒç”¨æˆ– return è¯­å¥ï¼‰ï¼Œå¤æ‚è¯­å¥å¿…é¡»ç¼©è¿›ï¼Œé¿å…æ­§ä¹‰ã€‚</p>
<pre><code class="language-nim"># å•ä¸ªèµ‹å€¼è¯­å¥ä¸éœ€è¦ç¼©è¿›:
if x: x = false

# åµŒå¥— if è¯­å¥éœ€è¦ç¼©è¿›:
if x:
  if y:
    y = false
  else:
    y = true

# éœ€è¦ç¼©è¿›, å› ä¸ºæ¡ä»¶åæœ‰ä¸¤ä¸ªè¯­å¥ï¼š
if x:
  x = false
  y = false
</code></pre>
<p>è¡¨è¾¾å¼ä¸ºäº†æ›´å¥½çš„å¯è¯»æ€§å¯ä»¥åœ¨æŸäº›åœ°æ–¹ç¼©è¿›ï¼š</p>
<pre><code class="language-nim">if thisIsaLongCondition() and
    thisIsAnotherLongCondition(1,
       2, 3, 4):
  x = true
</code></pre>
<p>ç”¨å°æ‹¬å·å’Œåˆ†å· (ğŸ˜‰ å¯ä»¥åœ¨åªå…è®¸è¡¨è¾¾å¼çš„åœ°æ–¹ä½¿ç”¨è¯­å¥ï¼š</p>
<pre><code class="language-nim">const fac4 = (var x = 1; for i in 1..4: x *= i; x)
</code></pre>
<h2 id="è¿‡ç¨‹procedure">è¿‡ç¨‹ï¼ˆprocedureï¼‰</h2>
<pre><code class="language-nim">proc yes(question: string): bool =
  echo question, &quot; (y/n)&quot;
  while true:
    case readLine(stdin)
    of &quot;y&quot;, &quot;Y&quot;, &quot;yes&quot;, &quot;Yes&quot;: return true
    of &quot;n&quot;, &quot;N&quot;, &quot;no&quot;, &quot;No&quot;: return false
    else: echo &quot;Please be clear: yes or no&quot;

if yes(&quot;Should I delete all your important files?&quot;):
  echo &quot;I'm sorry Dave, I'm afraid I can't do that.&quot;
else:
  echo &quot;I think you know what the problem is just as well as I do.&quot;
</code></pre>
<h3 id="result-å˜é‡">Result å˜é‡</h3>
<p>ä¸€ä¸ªè¿”å›å€¼çš„è¿‡ç¨‹æœ‰ä¸€ä¸ªéšå¼ result å˜é‡å£°æ˜ä»£è¡¨è¿”å›å€¼ã€‚ä¸€ä¸ªæ²¡æœ‰è¡¨è¾¾å¼çš„ return è¯­å¥æ˜¯ return result çš„ç®€å†™ã€‚ result æ€»åœ¨è¿‡ç¨‹çš„ç»“å°¾è‡ªåŠ¨è¿”å›å¦‚æœé€€å‡ºæ—¶æ²¡æœ‰ return è¯­å¥.</p>
<pre><code class="language-nim">proc sumTillNegative(x: varargs[int]): int =
  for i in x:
    if i &lt; 0:
      return
    result = result + i

echo sumTillNegative() # echos 0
echo sumTillNegative(3, 4, 5) # echos 12
echo sumTillNegative(3, 4 , -1 , 6) # echos 7
</code></pre>
<h3 id="å½¢å‚">å½¢å‚</h3>
<p>å½¢å‚åœ¨è¿‡ç¨‹ä½“ä¸­ä¸å¯æ”¹å˜ï¼Œè¿™å…è®¸ç¼–è¯‘å™¨ä»¥æœ€é«˜æ•ˆçš„æ–¹å¼å®ç°å‚æ•°ä¼ é€’ã€‚å¦‚æœåœ¨ä¸€ä¸ªè¿‡ç¨‹å†…éœ€è¦å¯ä»¥æ”¹å˜çš„å˜é‡ï¼Œå®ƒå¿…é¡»åœ¨è¿‡ç¨‹ä½“ä¸­ç”¨ <code>var</code> å£°æ˜:</p>
<pre><code class="language-nim"># é®è”½å½¢å‚å
proc printSeq(s: seq, nprinted: int = -1) =
  var nprinted = if nprinted == -1: s.len else: min(nprinted, s.len)
  for i in 0 .. &lt;nprinted:
    echo s[i]
</code></pre>
<p>å¦‚æœè¿‡ç¨‹éœ€è¦ä¸ºè°ƒç”¨è€…ä¿®æ”¹å®å‚ï¼Œå¯ä»¥ç”¨ var å‚æ•°:</p>
<pre><code class="language-nim">proc divmod(a, b: int; res, remainder: var int) =
  res = a div b        # æ•´é™¤
  remainder = a mod b  # æ•´æ•°å–æ¨¡æ“ä½œ

var
  x, y: int
divmod(8, 5, x, y) # ä¿®æ”¹ x å’Œ y
echo x
echo y
</code></pre>
<h3 id="discard-è¯­å¥">Discard è¯­å¥</h3>
<p>Nim ä¸å…è®¸é™é»˜åœ°ä¸¢å¼ƒä¸€ä¸ªè¿”å›å€¼ï¼Œé€šè¿‡ discard æŒ‡å®šå³å¯ï¼š</p>
<pre><code class="language-nim">discard yes(&quot;May I ask a pointless question?&quot;)
</code></pre>
<p>è¿”å›ç±»å‹å¯ä»¥è¢«éšå¼åœ°å¿½ç•¥å¦‚æœè°ƒç”¨çš„æ–¹æ³•ã€è¿­ä»£å™¨å·²ç»ç”¨ discardable pragma å£°æ˜è¿‡ï¼š</p>
<pre><code class="language-nim">proc p(x, y: int): int {.discardable.} =
  return x + y

p(3, 4) # now valid
</code></pre>
<h3 id="å‘½åå‚æ•°">å‘½åå‚æ•°</h3>
<pre><code class="language-nim">proc createWindow(x, y, width, height: int; title: string;
                  show: bool): Window =
   ...

var w = createWindow(show = true, title = &quot;My Application&quot;,
                     x = 0, y = 0, height = 600, width = 800)
</code></pre>
<h3 id="é»˜è®¤å€¼">é»˜è®¤å€¼</h3>
<pre><code class="language-nim">proc createWindow(x = 0, y = 0, width = 500, height = 700,
                  title = &quot;unknown&quot;,
                  show = true): Window =
   ...

var w = createWindow(title = &quot;My Application&quot;, height = 600, width = 800)
</code></pre>
<h3 id="é‡è½½è¿‡ç¨‹">é‡è½½è¿‡ç¨‹</h3>
<p>Nim æä¾›ç±»ä¼¼ C++ çš„è¿‡ç¨‹é‡è½½èƒ½åŠ›ï¼š</p>
<pre><code class="language-nim">proc toString(x: int): string = ...
proc toString(x: bool): string =
  if x: result = &quot;true&quot;
  else: result = &quot;false&quot;

echo toString(13)   # calls the toString(x: int) proc
echo toString(true) # calls the toString(x: bool) proc
</code></pre>
<h3 id="æ“ä½œç¬¦">æ“ä½œç¬¦</h3>
<pre><code class="language-nim">proc `$` (x: myDataType): string = ...
# ç°åœ¨$æ“ä½œç¬¦å¯¹myDataTypeç”Ÿæ•ˆï¼Œé‡è½½è§£æç¡®ä¿$å¯¹å†…ç½®ç±»å‹åƒä¹‹å‰ä¸€æ ·å·¥ä½œã€‚
</code></pre>
<h3 id="å‰å‘å£°æ˜">å‰å‘å£°æ˜</h3>
<pre><code class="language-nim">proc even(n: int): bool # å‰å‘å£°æ˜

proc odd(n: int): bool =
  assert(n &gt;= 0) # ç¡®ä¿æˆ‘ä»¬æ²¡æœ‰é‡åˆ°è´Ÿé€’å½’
  if n == 0: false
  else:
    n == 1 or even(n-1)

proc even(n: int): bool =
  assert(n &gt;= 0) # ç¡®ä¿æˆ‘ä»¬æ²¡æœ‰é‡åˆ°è´Ÿé€’å½’
  if n == 1: false
  else:
    n == 0 or odd(n-1)
</code></pre>
<h2 id="è¿­ä»£å™¨">è¿­ä»£å™¨</h2>
<pre><code class="language-nim">iterator countup(a, b: int): int =
  var res = a
  while res &lt;= b:
    yield res
    inc(res)
</code></pre>
<p>è¿­ä»£å™¨çœ‹èµ·æ¥åƒè¿‡ç¨‹ï¼Œä½†æœ‰å‡ ç‚¹é‡è¦çš„å·®å¼‚ï¼š</p>
<ul>
<li>è¿­ä»£å™¨åªèƒ½ä»å¾ªç¯ä¸­è°ƒç”¨ã€‚</li>
<li>è¿­ä»£å™¨ä¸èƒ½åŒ…å« return è¯­å¥ï¼ˆè¿‡ç¨‹ä¸èƒ½åŒ…å« yield è¯­å¥ï¼‰ã€‚</li>
<li>è¿­ä»£å™¨æ²¡æœ‰éšå¼ result å˜é‡ã€‚</li>
<li>è¿­ä»£å™¨ä¸æ”¯æŒé€’å½’ã€‚</li>
<li>è¿­ä»£å™¨ä¸èƒ½å‰å‘å£°æ˜ï¼Œå› ä¸ºç¼–è¯‘å™¨å¿…é¡»èƒ½å¤Ÿå†…è”è¿­ä»£å™¨ã€‚ï¼ˆè¿™ä¸ªé™åˆ¶å°†åœ¨ç¼–è¯‘å™¨çš„æœªæ¥ç‰ˆæœ¬ä¸­æ¶ˆå¤±ã€‚ï¼‰</li>
</ul>
<h2 id="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹</h2>
<h3 id="å¸ƒå°”å€¼">å¸ƒå°”å€¼</h3>
<p>bool: true / flaseï¼Œæ“ä½œç¬¦ <code>not</code>, <code>and</code>, <code>or</code>, <code>xor</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code>, <code>==</code>ã€‚</p>
<h3 id="å­—ç¬¦">å­—ç¬¦</h3>
<p>char: 1 byte, ord(char) -&gt; int, chr(int) -&gt; char, $char -&gt; string.</p>
<h3 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²</h3>
<p>å­—ç¬¦ä¸²å˜é‡ï¼ˆstringï¼‰å¯æ”¹å˜ï¼ŒNim ä¸­å­—ç¬¦ä¸²æœ‰é•¿åº¦é™åˆ¶ï¼Œä»¥é›¶ç»“å°¾ã€‚è·å–å­—ç¬¦ä¸²é•¿åº¦ <code>.len</code>ï¼Œå­—ç¬¦ä¸²èµ‹å€¼äº§ç”Ÿæ‹·è´ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²å¯ä½¿ç”¨ <code>&amp;</code> å’Œ <code>add</code> è¿›è¡Œè¿½åŠ ã€‚</p>
<h3 id="æ•´å‹">æ•´å‹</h3>
<p>Nimæœ‰ä»¥ä¸‹å†…ç½®æ•´å‹ï¼š</p>
<pre><code class="language-nim">int int8 int16 int32 int64 uint uint8 uint16 uint32 uint64
</code></pre>
<p>é»˜è®¤æ•´å‹æ˜¯ <code>int</code> ã€‚æ•´å‹å­—é¢å€¼å¯ä»¥ç”¨ <code>ç±»å‹å‰ç¼€</code> æ¥æŒ‡å®šä¸€ä¸ªéé»˜è®¤æ•´æ•°ç±»å‹ï¼š</p>
<pre><code class="language-nim">let
  x = 0     # x æ˜¯ ``int``
  y = 0'i8  # y æ˜¯ ``int8``
  z = 0'i64 # z æ˜¯ ``int64``
  u = 0'u   # u æ˜¯ ``uint``
</code></pre>
<p>å¤šæ•°å¸¸ç”¨æ•´æ•°ç”¨æ¥è®¡æ•°å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œæ‰€ä»¥ int å’ŒæŒ‡é’ˆå…·æœ‰ç›¸åŒçš„å¤§å°ã€‚</p>
<p>æ•´æ•°æ”¯æŒé€šç”¨æ“ä½œç¬¦ <code>+ - * div mod &lt; &lt;= == != &gt; &gt;=</code> ã€‚ ä¹Ÿæ”¯æŒ <code>and or xor not</code> æ“ä½œç¬¦ï¼Œå¹¶æä¾›æŒ‰ä½æ“ä½œã€‚ å·¦ç§»ç”¨ <code>shl</code> ï¼Œå³ç§»ç”¨ <code>shr</code> ã€‚ä½ç§»æ“ä½œç¬¦å®å‚æ€»æ˜¯è¢«å½“ä½œæ— ç¬¦å·æ•´å‹ã€‚æ™®é€šä¹˜æ³•æˆ–é™¤æ³•å¯ä»¥åšç®—æœ¯ä½ç§»ã€‚</p>
<h3 id="æµ®ç‚¹">æµ®ç‚¹</h3>
<p>Nim æœ‰è¿™äº›å†…ç½®æµ®ç‚¹ç±»å‹ï¼š<code>float float32 float64</code>ã€‚é»˜è®¤æµ®ç‚¹ç±»å‹æ˜¯<code>float</code>ã€‚åœ¨å½“å‰çš„å®ç°ï¼Œ float æ˜¯ 64 ä½ã€‚</p>
<pre><code class="language-nim">var
  x = 0.0      # x æ˜¯ ``float``
  y = 0.0'f32  # y æ˜¯ ``float32``
  z = 0.0'f64  # z æ˜¯ ``float64``
</code></pre>
<p><strong>è‡ªåŠ¨ç±»å‹è½¬æ¢</strong>åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ä¸åŒç±»å‹æ—¶æ‰§è¡Œï¼šçŸ­ç±»å‹è½¬æ¢ä¸ºé•¿ç±»å‹ã€‚æ•´æ•°ç±»å‹ä¸ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºæµ®ç‚¹ç±»å‹ï¼Œåä¹‹äº¦ç„¶ã€‚ä½¿ç”¨ <code>toInt</code> å’Œ <code>toFloat</code> è¿‡ç¨‹æ¥è½¬æ¢ã€‚</p>
<pre><code class="language-nim">var
  x: int32 = 1.int32   # ä¸è°ƒç”¨ int32(1) ç›¸åŒ
  y: int8  = int8('a') # 'a' == 97'i8
  z: float = 2.5       # int(2.5) å‘ä¸‹å–æ•´ä¸º 2
  sum: int = int(x) + int(y) + int(z) # sum == 100
</code></pre>
<h2 id="å†…éƒ¨ç±»å‹è¡¨ç¤º">å†…éƒ¨ç±»å‹è¡¨ç¤º</h2>
<pre><code class="language-nim">var
  myBool = true
  myCharacter = 'n'
  myString = &quot;nim&quot;
  myInteger = 42
  myFloat = 3.14
echo myBool, &quot;:&quot;, repr(myBool)
# --&gt; true:true
echo myCharacter, &quot;:&quot;, repr(myCharacter)
# --&gt; n:'n'
echo myString, &quot;:&quot;, repr(myString)
# --&gt; nim:0x10fa8c050&quot;nim&quot;
echo myInteger, &quot;:&quot;, repr(myInteger)
# --&gt; 42:42
echo myFloat, &quot;:&quot;, repr(myFloat)
# --&gt; 3.1400000000000001e+00:3.1400000000000001e+00
</code></pre>
<h2 id="é«˜çº§ç±»å‹">é«˜çº§ç±»å‹</h2>
<p>åœ¨ Nim ä¸­æ–°ç±»å‹å¯ä»¥åœ¨ type è¯­å¥é‡Œå®šä¹‰ï¼š</p>
<pre><code class="language-nim">type
  biggestInt = int64      # å¯ç”¨çš„æœ€å¤§æ•´æ•°ç±»å‹
  biggestFloat = float64  # å¯ç”¨çš„æœ€å¤§æµ®ç‚¹ç±»å‹
</code></pre>
<h3 id="æšä¸¾">æšä¸¾</h3>
<p>æšä¸¾ç±»å‹çš„å˜é‡åªèƒ½èµ‹å€¼ä¸ºæšä¸¾æŒ‡å®šçš„å€¼ã€‚è¿™äº›å€¼æ˜¯æœ‰åºç¬¦å·çš„é›†åˆã€‚æ¯ä¸ªç¬¦å·æ˜ å°„åˆ°å†…éƒ¨çš„ä¸€ä¸ªæ•´æ•°ç±»å‹ã€‚ç¬¬ä¸€ä¸ªç¬¦å·ç”¨è¿è¡Œæ—¶çš„ 0 è¡¨ç¤ºï¼Œç¬¬äºŒä¸ªç”¨ 1ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-nim">type
  Direction = enum
    north, east, south, west

var x = south     # `x`æ˜¯`Direction`; å€¼æ˜¯`south`
echo x            # å‘æ ‡å‡†è¾“å‡ºå†™&quot;south&quot;
</code></pre>
<p>æšä¸¾çš„ç¬¦å·å¯ä»¥è¢«é™å®šä»¥é¿å…æ­§ä¹‰ï¼š<code>Direction.south</code>ã€‚<code>$</code> æ“ä½œç¬¦å¯ä»¥å°†ä»»ä½•æšä¸¾å€¼è½¬æ¢ä¸ºå®ƒçš„åå­—ï¼Œ <code>ord</code> è¿‡ç¨‹å¯ä»¥è½¬æ¢ä¸ºå®ƒåº•å±‚çš„æ•´æ•°ç±»å‹ã€‚</p>
<h3 id="åºæ•°ç±»å‹">åºæ•°ç±»å‹</h3>
<p>æšä¸¾ã€æ•´å‹ã€ charã€ boolï¼ˆå’Œå­èŒƒå›´ï¼‰å«åšåºæ•°ç±»å‹ã€‚åºæ•°ç±»å‹æœ‰ä¸€äº›ç‰¹æ®Šæ“ä½œï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operation</th>
<th style="text-align:center">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ord(x)</td>
<td style="text-align:center">è¿”å›è¡¨ç¤º x çš„æ•´æ•°å€¼</td>
</tr>
<tr>
<td style="text-align:center">inc(x)</td>
<td style="text-align:center">x é€’å¢1</td>
</tr>
<tr>
<td style="text-align:center">inc(x, n)</td>
<td style="text-align:center">x é€’å¢ n; n æ˜¯æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center">dec(x)</td>
<td style="text-align:center">x é€’å‡1</td>
</tr>
<tr>
<td style="text-align:center">dec(x, n)</td>
<td style="text-align:center">x é€’å‡ n; n æ˜¯æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:center">succ(x)</td>
<td style="text-align:center">è¿”å› x çš„ä¸‹ä¸€ä¸ªå€¼</td>
</tr>
<tr>
<td style="text-align:center">succ(x, n)</td>
<td style="text-align:center">è¿”å› x åçš„ç¬¬nä¸ªå€¼</td>
</tr>
<tr>
<td style="text-align:center">pred(x)</td>
<td style="text-align:center">è¿”å› x çš„å‰ä¸€ä¸ªå€¼</td>
</tr>
<tr>
<td style="text-align:center">pred(x, n)</td>
<td style="text-align:center">è¿”å› x å‰çš„ç¬¬nä¸ªå€¼</td>
</tr>
</tbody>
</table>
<p>inc, dec, succ å’Œ pred æ“ä½œé€šè¿‡æŠ›å‡º EOutOfRange æˆ– EOverflow å¼‚å¸¸è€Œå¤±è´¥ã€‚</p>
<h3 id="å­èŒƒå›´">å­èŒƒå›´</h3>
<p>ä¸€ä¸ªå­èŒƒå›´æ˜¯ä¸€ä¸ªæ•´å‹æˆ–æšä¸¾ç±»å‹å€¼ï¼ˆåŸºæœ¬ç±»å‹ï¼‰çš„èŒƒå›´ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-nim">type
  MySubrange = range[0..5]
</code></pre>
<p>MySubrange æ˜¯åªåŒ…å« 0 åˆ° 5 çš„ int èŒƒå›´ã€‚èµ‹ä»»ä½•å…¶å®ƒå€¼ç»™ MySubrange ç±»å‹çš„å˜é‡æ˜¯ç¼–è¯‘æœŸæˆ–è¿è¡Œæ—¶é”™è¯¯ã€‚å…è®¸ç»™å­èŒƒå›´èµ‹å€¼å®ƒçš„åŸºç±»å‹ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<h3 id="é›†åˆç±»å‹">é›†åˆç±»å‹</h3>
<p>é›†åˆçš„åŸºç±»å‹åªèƒ½æ˜¯å›ºå®šå¤§å°çš„åºæ•°ç±»å‹ï¼Œå®ƒä»¬æ˜¯:</p>
<ul>
<li><code>int8</code>-<code>int16</code></li>
<li><code>uint8</code>/<code>byte</code>-<code>uint16</code></li>
<li><code>char</code></li>
<li><code>enum</code></li>
</ul>
<pre><code class="language-nim">type
  CharSet = set[char]
var
  x: CharSet
x = {'a'..'z', '0'..'9'} # æ„é€ ä¸€ä¸ªåŒ…å«'a'åˆ°'z'å’Œ'0'åˆ°'9'çš„é›†åˆ
</code></pre>
<table>
<thead>
<tr>
<th style="text-align:center">æ“ä½œç¬¦</th>
<th style="text-align:center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A + B</td>
<td style="text-align:center">å¹¶é›†</td>
</tr>
<tr>
<td style="text-align:center">A * B</td>
<td style="text-align:center">äº¤é›†</td>
</tr>
<tr>
<td style="text-align:center">A - B</td>
<td style="text-align:center">å·®é›†</td>
</tr>
<tr>
<td style="text-align:center">A == B</td>
<td style="text-align:center">ç›¸ç­‰</td>
</tr>
<tr>
<td style="text-align:center">A &lt;= B</td>
<td style="text-align:center">å­é›†</td>
</tr>
<tr>
<td style="text-align:center">A &lt; B</td>
<td style="text-align:center">çœŸå­é›†</td>
</tr>
<tr>
<td style="text-align:center">e in A</td>
<td style="text-align:center">å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:center">e notin A</td>
<td style="text-align:center">Aä¸åŒ…å«å…ƒç´ e</td>
</tr>
<tr>
<td style="text-align:center">contains(A, e)</td>
<td style="text-align:center">åŒ…å«å…ƒç´ e</td>
</tr>
<tr>
<td style="text-align:center">card(A)</td>
<td style="text-align:center">Açš„åŸº (é›†åˆAä¸­çš„å…ƒç´ æ•°é‡)</td>
</tr>
<tr>
<td style="text-align:center">incl(A, elem)</td>
<td style="text-align:center">åŒ A = A + {elem}</td>
</tr>
<tr>
<td style="text-align:center">excl(A, elem)</td>
<td style="text-align:center">åŒ A = A - {elem}</td>
</tr>
</tbody>
</table>
<h3 id="ä½å­—æ®µ">ä½å­—æ®µ</h3>
<pre><code class="language-nim">type
  MyFlag* {.size: sizeof(cint).} = enum # æšä¸¾
    A
    B
    C
    D
  MyFlags = set[MyFlag] # é›†åˆ

proc toNum(f: MyFlags): int = cast[cint](f) # å¼ºè½¬
proc toFlags(v: int): MyFlags = cast[MyFlags](v)

assert toNum({}) == 0
assert toNum({A}) == 1
assert toNum({D}) == 8
assert toNum({A, C}) == 5
assert toFlags(0) == {}
assert toFlags(7) == {A, B, C}
</code></pre>
<h3 id="æ•°ç»„">æ•°ç»„</h3>
<pre><code class="language-type">type
  IntArray = array[0..5, int] # ä¸€ä¸ªç´¢å¼•ä¸º 0..5 çš„æ•°â€‹ç»„
var
  x: IntArray
x = [1, 2, 3, 4, 5, 6]
for i in low(x)..high(x): # æœ€å°/å¤§ç´¢å¼•
  echo x[i]
</code></pre>
<pre><code class="language-nim">type
  Direction = enum
    north, east, south, west
  BlinkLights = enum
    off, on, slowBlink, mediumBlink, fastBlink
  LevelSetting = array[north..west, BlinkLights]
var
  level: LevelSetting
level[north] = on
level[south] = slowBlink
level[east] = fastBlink
echo repr(level)  # --&gt; [on, fastBlink, slowBlink, off]
echo low(level)   # --&gt; north
echo len(level)   # --&gt; 4
echo high(level)  # --&gt; west
</code></pre>
<pre><code class="language-nim">type
  LightTower = array[1..10, array[north..west, BlinkLights]]
type
  IntArray = array[0..5, int] # ä¸€ä¸ªç´¢å¼•ä¸º0..5çš„æ•°â€‹ç»„
  QuickArray = array[6, int]  # ä¸€ä¸ªç´¢å¼•ä¸º0..5çš„æ•°â€‹ç»„
var
  x: IntArray
  y: QuickArray
x = [1, 2, 3, 4, 5, 6]
y = x
for i in low(x)..high(x):
  echo x[i], y[i]
</code></pre>
<h3 id="åºåˆ—">åºåˆ—</h3>
<p>åºåˆ—ç±»ä¼¼æ•°ç»„ä½†æ˜¯åŠ¨æ€é•¿åº¦ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ”¹å˜ã€‚å› ä¸ºåºåˆ—æ˜¯å¤§å°å¯å˜çš„å®ƒä»¬æ€»æ˜¯åˆ†é…åœ¨å †ä¸Šï¼Œè¢«åƒåœ¾å›æ”¶ã€‚</p>
<p>åºåˆ—æ€»æ˜¯ä»¥ä»é›¶å¼€å§‹çš„ int ç±»å‹ç´¢å¼•ã€‚ len , low å’Œ high æ“ä½œç¬¦ä¹Ÿå¯ç”¨äºåºåˆ—ã€‚ x[i] æ ‡è®°å¯ä»¥ç”¨äºè®¿é—® x çš„ç¬¬iä¸ªå…ƒç´ ã€‚</p>
<p>åºåˆ—å¯ä»¥ç”¨æ•°ç»„æ„é€ å™¨ <code>[]</code> æ•°ç»„åˆ°åºåˆ—æ“ä½œç¬¦ <code>@</code> æ„æˆã€‚å¦ä¸€ä¸ªä¸ºåºåˆ—åˆ†é…ç©ºé—´çš„æ–¹æ³•æ˜¯è°ƒç”¨å†…ç½® newSeq è¿‡ç¨‹ã€‚</p>
<pre><code class="language-nim">var
  x: seq[int] # æ•´æ•°åºåˆ—å¼•ç”¨
x = @[1, 2, 3, 4, 5, 6] # @ æŠŠæ•°ç»„è½¬æˆåˆ†é…åœ¨å †ä¸Šçš„åºåˆ—
</code></pre>
<pre><code class="language-nim">for value in @[3, 4, 5]:
  echo value
# --&gt; 3
# --&gt; 4
# --&gt; 5

for i, value in @[3, 4, 5]:
  echo &quot;index: &quot;, $i, &quot;, value:&quot;, $value
# --&gt; index: 0, value:3
# --&gt; index: 1, value:4
# --&gt; index: 2, value:5
</code></pre>
<h3 id="å¼€æ”¾æ•°ç»„">å¼€æ”¾æ•°ç»„</h3>
<blockquote>
<p>æ³¨æ„: å¼€æ”¾æ•°ç»„åªç”¨äºå½¢å‚ã€‚</p>
</blockquote>
<pre><code class="language-nim">var
  fruits:   seq[string]       # å­—ç¬¦ä¸²åºåˆ—ç”¨ '@[]' åˆå§‹åŒ–
  capitals: array[3, string]  # å›ºå®šå¤§å°çš„å­—ç¬¦ä¸²æ•°ç»„

capitals = [&quot;New York&quot;, &quot;London&quot;, &quot;Berlin&quot;]   # æ•°ç»„ 'capitals' å…è®¸åªæœ‰ä¸‰ä¸ªå…ƒç´ çš„èµ‹å€¼
fruits.add(&quot;Banana&quot;)          # åºåˆ— 'fruits' åœ¨è¿è¡Œæ—¶åŠ¨æ€æ‰©å±•
fruits.add(&quot;Mango&quot;)

proc openArraySize(oa: openArray[string]): int =
  oa.len

assert openArraySize(fruits) == 2     # è¿‡ç¨‹æ¥å—ä¸€ä¸ªåºåˆ—ä½œä¸ºå½¢å‚
assert openArraySize(capitals) == 3   # ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„
</code></pre>
<h3 id="å¯å˜å‚æ•°">å¯å˜å‚æ•°</h3>
<p>varargs å‚æ•°åƒå¼€æ”¾æ•°ç»„å½¢å‚ã€‚ å®ƒä¹Ÿè¡¨ç¤ºå®ç°ä¼ é€’æ•°é‡å¯å˜çš„å®å‚ç»™è¿‡ç¨‹ã€‚ç¼–è¯‘å™¨å°†å®å‚åˆ—è¡¨è‡ªåŠ¨è½¬æ¢ä¸ºæ•°ç»„ï¼š</p>
<pre><code class="language-nim">proc myWriteln(f: File, a: varargs[string]) =
  for s in items(a):
    write(f, s)
  write(f, &quot;\n&quot;)

myWriteln(stdout, &quot;abc&quot;, &quot;def&quot;, &quot;xyz&quot;)
# ç¼–è¯‘å™¨è½¬ä¸º:
myWriteln(stdout, [&quot;abc&quot;, &quot;def&quot;, &quot;xyz&quot;])
</code></pre>
<p>è½¬æ¢åªåœ¨å¯å˜å½¢å‚æ˜¯è¿‡ç¨‹å¤´éƒ¨çš„æœ€åä¸€ä¸ªå½¢å‚æ—¶å®Œæˆã€‚å®ƒä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªæƒ…æ™¯æ‰§è¡Œç±»å‹è½¬æ¢ï¼š</p>
<pre><code class="language-nim">proc myWriteln(f: File, a: varargs[string, `$`]) =
  for s in items(a):
    write(f, s)
  write(f, &quot;\n&quot;)

myWriteln(stdout, 123, &quot;abc&quot;, 4.0)
# ç¼–è¯‘å™¨è½¬ä¸º:
myWriteln(stdout, [$123, $&quot;abc&quot;, $4.0])
</code></pre>
<p>åœ¨ç¤ºä¾‹ä¸­ <code>$</code> é€‚ç”¨äºä»»ä½•ä¼ é€’ç»™å½¢å‚ a çš„å®å‚ã€‚æ³¨æ„ <code>$</code> é€‚ç”¨äºç©ºå­—ç¬¦ä¸²æŒ‡ä»¤ã€‚</p>
<h3 id="åˆ‡ç‰‡">åˆ‡ç‰‡</h3>
<pre><code class="language-nim">var
  a = &quot;Nim is a progamming language&quot;
  b = &quot;Slices are useless.&quot;

echo a[7..12] # --&gt; 'a prog'
b[11..^2] = &quot;useful&quot;
echo b # --&gt; 'Slices are useful.'
</code></pre>
<pre><code class="language-nim">&quot;Slices are useless.&quot;
 |          |     |
 0         11    17   ä½¿ç”¨ç´¢å¼•
^19        ^8    ^2   ä½¿ç”¨^
</code></pre>
<p><code>b[0..^1]</code> == <code>b[0..b.len-1]</code> == <code>b[0..&lt;b.len]</code> -&gt; <code>^1</code> &lt;=&gt; <code>b.len-1</code></p>
<h3 id="å¯¹è±¡">å¯¹è±¡</h3>
<pre><code class="language-nim">type
  Person = object
    name: string
    age: int

var person1 = Person(name: &quot;Peter&quot;, age: 30)

echo person1.name # &quot;Peter&quot;
echo person1.age  # 30

var person2 = person1 # å¤åˆ¶person 1

person2.age += 14

echo person1.age # 30
echo person2.age # 44


# é¡ºåºå¯ä»¥æ”¹å˜
let person3 = Person(age: 12, name: &quot;Quentin&quot;)

# ä¸éœ€è¦æŒ‡å®šæ¯ä¸ªæˆå‘˜
let person4 = Person(age: 3)
# æœªæŒ‡å®šçš„æˆå‘˜å°†ç”¨é»˜è®¤å€¼åˆå§‹åŒ–ã€‚æœ¬ä¾‹ä¸­å®ƒæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚
doAssert person4.name == &quot;&quot;
</code></pre>
<p>åœ¨å®šä¹‰çš„æ¨¡å—å¤–å¯è§çš„å¯¹è±¡å­—æ®µéœ€è¦åŠ ä¸Š <code>*</code> :</p>
<pre><code class="language-nim">type
  Person* = object # å…¶å®ƒæ¨¡å—å¯è§
    name*: string  # è¿™ä¸ªç±»å‹çš„å­—æ®µåœ¨å…¶å®ƒæ¨¡å—å¯è§
    age*: int
</code></pre>
<h3 id="å…ƒç»„">å…ƒç»„</h3>
<pre><code class="language-nim">type
  # ç±»å‹è¡¨ç¤ºä¸€ä¸ªäºº:
  # ä¸€ä¸ªäººæœ‰åå­—å’Œå¹´é¾„ã€‚
  Person = tuple
    name: string
    age: int
  
  # ç­‰ä»·ç±»å‹çš„è¯­æ³•ã€‚
  PersonX = tuple[name: string, age: int]
  
  # åŒ¿åå­—æ®µè¯­æ³•
  PersonY = (string, int)

var
  person: Person
  personX: PersonX
  personY: PersonY

person = (name: &quot;Peter&quot;, age: 30)
# Personå’ŒPersonXç­‰ä»·
personX = person

# ç”¨åŒ¿åå­—æ®µåˆ›å»ºä¸€ä¸ªå…ƒç»„ï¼š
personY = (&quot;Peter&quot;, 30)

# æœ‰åŒ¿åå­—æ®µå…ƒç»„å…¼å®¹æœ‰å­—æ®µåå…ƒç»„ã€‚
person = personY
personY = person

# é€šå¸¸ç”¨äºçŸ­å…ƒç»„åˆå§‹åŒ–è¯­æ³•
person = (&quot;Peter&quot;, 30)

echo person.name # &quot;Peter&quot;
echo person.age  # 30

echo person[0] # &quot;Peter&quot;
echo person[1] # 30

# ä½ ä¸éœ€è¦åœ¨ä¸€ä¸ªç‹¬ç«‹ç±»å‹æ®µä¸­å£°æ˜å…ƒç»„ã€‚
var building: tuple[street: string, number: int]
building = (&quot;Rue del Percebe&quot;, 13)
echo building.street

# ä¸‹é¢çš„è¡Œä¸èƒ½ç¼–è¯‘ï¼Œå®ƒä»¬æ˜¯ä¸åŒçš„å…ƒç»„ã€‚
#person = building
# --&gt; Error: type mismatch: got (tuple[street: string, number: int])
#     but expected 'Person'
</code></pre>
<p>å…ƒç»„åªæœ‰åœ¨å˜é‡èµ‹å€¼æœŸé—´å¯ä»¥è§£åŒ…:</p>
<pre><code class="language-nim">import os

let
  path = &quot;usr/local/nimc.html&quot;
  (dir, name, ext) = splitFile(path)
  baddir, badname, badext = splitFile(path)
echo dir      # è¾“å‡º `usr/local`
echo name     # è¾“å‡º `nimc`
echo ext      # è¾“å‡º `.html`
# ä¸‹é¢è¾“å‡ºåŒæ ·çš„è¡Œ:
# `(dir: usr/local, name: nimc, ext: .html)`
echo baddir
echo badname
echo badext
</code></pre>
<h3 id="å¼•ç”¨å’ŒæŒ‡é’ˆç±»å‹">å¼•ç”¨å’ŒæŒ‡é’ˆç±»å‹</h3>
<p>Nim åŒºåˆ† <strong>è¢«è¿½è¸ª</strong> å’Œ <strong>æœªè¿½è¸ª</strong> å¼•ç”¨ã€‚æœªè¿½è¸ªå¼•ç”¨ä¹Ÿè¢«ç§°ä¸º <strong>æŒ‡é’ˆ</strong> ã€‚è¿½è¸ªçš„å¼•ç”¨æŒ‡å‘åƒåœ¾å›æ”¶å †é‡Œçš„å¯¹è±¡ï¼Œæœªè¿½è¸ªå¼•ç”¨æŒ‡å‘æ‰‹åŠ¨åˆ†é…å¯¹è±¡æˆ–å†…å­˜ä¸­å…¶å®ƒåœ°æ–¹çš„å¯¹è±¡ã€‚å› æ­¤æœªè¿½è¸ªå¼•ç”¨æ˜¯ <strong>ä¸å®‰å…¨çš„</strong>ã€‚ ä¸ºäº†æŸäº›ä½çº§çš„æ“ä½œï¼ˆä¾‹å¦‚ï¼Œè®¿é—®ç¡¬ä»¶ï¼‰ï¼Œæœªè¿½è¸ªçš„å¼•ç”¨æ˜¯å¿…é¡»çš„ã€‚</p>
<p>è¿½è¸ªçš„å¼•ç”¨ç”¨ <code>ref</code> å…³é”®å­—å£°æ˜ï¼›æœªè¿½è¸ªå¼•ç”¨ç”¨ <code>ptr</code> å…³é”®å­—å£°æ˜ã€‚</p>
<p>ç©º <code>[]</code> ä¸‹æ ‡æ ‡è®°å¯ä»¥ç”¨æ¥<strong>è§£å¼•ç”¨</strong>ä¸€ä¸ªå¼•ç”¨ï¼Œè¡¨ç¤ºè·å–å¼•ç”¨æŒ‡å‘çš„å†…å®¹ã€‚<code>.</code>ï¼ˆè®¿é—®ä¸€ä¸ªå…ƒç»„/å¯¹è±¡å­—æ®µæ“ä½œç¬¦ï¼‰å’Œ <code>[]</code> (æ•°ç»„/å­—ç¬¦ä¸²/åºåˆ—ç´¢å¼•æ“ä½œç¬¦ï¼‰æ“ä½œç¬¦ä¸ºå¼•ç”¨ç±»å‹æ‰§è¡Œéšå¼è§£å¼•ç”¨æ“ä½œï¼š</p>
<pre><code class="language-nim">type
  Node = ref object
    le, ri: Node
    data: int
var
  n: Node
new(n)
n.data = 9
# ä¸å¿…å†™n[].data; å®é™…ä¸Šn[].dataæ˜¯ä¸æå€¡çš„!
</code></pre>
<p>ä¸ºäº†åˆ†é…ä¸€ä¸ªæ–°è¿½è¸ªçš„å¯¹è±¡ï¼Œå¿…é¡»ä½¿ç”¨å†…ç½®è¿‡ç¨‹ new ã€‚ ä¸ºäº†å¤„ç†æœªè¿½è¸ªå†…å­˜ï¼Œ å¯ä»¥ç”¨ alloc, dealloc å’Œ reallocï¼Œå¦‚æœä¸€ä¸ªå¼•ç”¨æŒ‡å‘ nothing, å®ƒçš„å€¼æ˜¯ <code>nil</code>ã€‚</p>
<h3 id="è¿‡ç¨‹ç±»å‹">è¿‡ç¨‹ç±»å‹</h3>
<p>è¿‡ç¨‹ç±»å‹æ˜¯æŒ‡å‘è¿‡ç¨‹çš„æŒ‡é’ˆã€‚ <code>nil</code> æ˜¯è¿‡ç¨‹ç±»å‹å˜é‡å…è®¸çš„å€¼ã€‚Nim ä½¿ç”¨è¿‡ç¨‹ç±»å‹è¾¾åˆ° å‡½æ•°å¼ç¼–ç¨‹æŠ€æœ¯ã€‚</p>
<pre><code class="language-nim">proc echoItem(x: int) = echo x

proc forEach(action: proc (x: int)) =
  const
    data = [2, 3, 5, 7, 11]
  for d in items(data):
    action(d)

forEach(echoItem)
</code></pre>
<h2 id="æ¨¡å—">æ¨¡å—</h2>
<p>Nim æ”¯æŒç”¨æ¨¡å—çš„æ¦‚å¿µæŠŠä¸€ä¸ªç¨‹åºæ‹†åˆ†æˆç‰‡æ®µã€‚æ¯ä¸ªæ¨¡å—åœ¨å®ƒè‡ªå·±çš„æ–‡ä»¶é‡Œã€‚æ¨¡å—å®ç°äº† ä¿¡æ¯éšè—å’Œç¼–è¯‘éš”ç¦» ã€‚ä¸€ä¸ªæ¨¡å—å¯ä»¥é€šè¿‡ <code>import</code> è¯­å¥è®¿é—®å¦ä¸€ä¸ªæ¨¡å—ç¬¦å·ã€‚ åªæœ‰æ ‡è®°äº†æ˜Ÿå·(<code>*</code>)çš„é¡¶çº§ç¬¦å·è¢«å¯¼å‡ºï¼š</p>
<pre><code class="language-nim"># Module A
var
  x*, y: int

proc `*` *(a, b: seq[int]): seq[int] =
  # åˆ†é…æ–°åºåˆ—ï¼š
  newSeq(result, len(a))
  # ä¸¤ä¸ªåºåˆ—ç›¸ä¹˜ï¼š
  for i in 0..len(a)-1: result[i] = a[i] * b[i]

when isMainModule:
  # æµ‹è¯•åºåˆ—ä¹˜ ``*`` :
  assert(@[1, 2, 3] * @[1, 2, 3] == @[1, 4, 9])
</code></pre>
<p>æ¨¡å—é™å®šï¼š</p>
<pre><code class="language-nim"># Module A
var x*: string

# Module B
var x*: int

# Module C
import A, B
write(stdout, x) # error: x æœ‰æ­§ä¹‰
write(stdout, A.x) # okay: ç”¨äº†é™å®š

var x = 4
write(stdout, x) # æ²¡æœ‰æ­§ä¹‰: ä½¿ç”¨æ¨¡å— C çš„ x
</code></pre>
<h3 id="æ’é™¤ç¬¦å·">æ’é™¤ç¬¦å·</h3>
<pre><code class="language-nim">import mymodule except y
</code></pre>
<h3 id="from-è¯­å¥">From è¯­å¥</h3>
<pre><code class="language-nim">from mymodule import x, y, z # --&gt; x()
from mymodule as m import nil # --&gt; m.x()
</code></pre>
<h3 id="include-æ¨¡å—">Include æ¨¡å—</h3>
<p>include è¯­å¥å’Œå¯¼å…¥ä¸€ä¸ªæ¨¡å—åšä¸åŒçš„åŸºç¡€å·¥ä½œï¼šå®ƒåªåŒ…å«ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚ include è¯­å¥åœ¨æŠŠä¸€ä¸ªå¤§æ¨¡å—æ‹†åˆ†ä¸ºå‡ ä¸ªæ–‡ä»¶æ—¶æœ‰ç”¨ï¼š</p>
<pre><code class="language-nim">include fileA, fileB, fileC
</code></pre>

                  </div>
                  <div class="toc-container">
                    <div style="position: sticky;
                    top: 20px;">
                    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E8%AF%8D%E6%B3%95%E5%85%83%E7%B4%A0">è¯æ³•å…ƒç´ </a>
<ul>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6%E5%AD%97%E9%9D%A2%E9%87%8F">å­—ç¬¦ä¸²å’Œå­—ç¬¦å­—é¢é‡</a></li>
<li><a href="#%E6%B3%A8%E9%87%8A">æ³¨é‡Š</a></li>
<li><a href="#%E6%95%B0%E5%AD%97">æ•°å­—</a></li>
</ul>
</li>
<li><a href="#var-%E8%AF%AD%E5%8F%A5">var è¯­å¥</a></li>
<li><a href="#%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5">èµ‹å€¼è¯­å¥</a></li>
<li><a href="#%E5%B8%B8%E9%87%8F">å¸¸é‡</a></li>
<li><a href="#let-%E8%AF%AD%E5%8F%A5">let è¯­å¥</a></li>
<li><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5">æµç¨‹æ§åˆ¶è¯­å¥</a>
<ul>
<li><a href="#if-%E8%AF%AD%E5%8F%A5">if è¯­å¥</a></li>
<li><a href="#case-%E8%AF%AD%E5%8F%A5">Case è¯­å¥</a></li>
<li><a href="#while-%E8%AF%AD%E5%8F%A5">While è¯­å¥</a></li>
<li><a href="#for-%E8%AF%AD%E5%8F%A5">For è¯­å¥</a></li>
<li><a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%9D%97%E8%AF%AD%E5%8F%A5">ä½œç”¨åŸŸå’Œå—è¯­å¥</a></li>
<li><a href="#break-%E8%AF%AD%E5%8F%A5">Break è¯­å¥</a></li>
<li><a href="#continue-%E8%AF%AD%E5%8F%A5">Continue è¯­å¥</a></li>
<li><a href="#when-%E8%AF%AD%E5%8F%A5">When è¯­å¥</a></li>
</ul>
</li>
<li><a href="#%E8%AF%AD%E5%8F%A5%E5%92%8C%E7%BC%A9%E8%BF%9B">è¯­å¥å’Œç¼©è¿›</a></li>
<li><a href="#%E8%BF%87%E7%A8%8Bprocedure">è¿‡ç¨‹ï¼ˆprocedureï¼‰</a>
<ul>
<li><a href="#result-%E5%8F%98%E9%87%8F">Result å˜é‡</a></li>
<li><a href="#%E5%BD%A2%E5%8F%82">å½¢å‚</a></li>
<li><a href="#discard-%E8%AF%AD%E5%8F%A5">Discard è¯­å¥</a></li>
<li><a href="#%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0">å‘½åå‚æ•°</a></li>
<li><a href="#%E9%BB%98%E8%AE%A4%E5%80%BC">é»˜è®¤å€¼</a></li>
<li><a href="#%E9%87%8D%E8%BD%BD%E8%BF%87%E7%A8%8B">é‡è½½è¿‡ç¨‹</a></li>
<li><a href="#%E6%93%8D%E4%BD%9C%E7%AC%A6">æ“ä½œç¬¦</a></li>
<li><a href="#%E5%89%8D%E5%90%91%E5%A3%B0%E6%98%8E">å‰å‘å£°æ˜</a></li>
</ul>
</li>
<li><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8">è¿­ä»£å™¨</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B">åŸºæœ¬ç±»å‹</a>
<ul>
<li><a href="#%E5%B8%83%E5%B0%94%E5%80%BC">å¸ƒå°”å€¼</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6">å­—ç¬¦</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2">å­—ç¬¦ä¸²</a></li>
<li><a href="#%E6%95%B4%E5%9E%8B">æ•´å‹</a></li>
<li><a href="#%E6%B5%AE%E7%82%B9">æµ®ç‚¹</a></li>
</ul>
</li>
<li><a href="#%E5%86%85%E9%83%A8%E7%B1%BB%E5%9E%8B%E8%A1%A8%E7%A4%BA">å†…éƒ¨ç±»å‹è¡¨ç¤º</a></li>
<li><a href="#%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B">é«˜çº§ç±»å‹</a>
<ul>
<li><a href="#%E6%9E%9A%E4%B8%BE">æšä¸¾</a></li>
<li><a href="#%E5%BA%8F%E6%95%B0%E7%B1%BB%E5%9E%8B">åºæ•°ç±»å‹</a></li>
<li><a href="#%E5%AD%90%E8%8C%83%E5%9B%B4">å­èŒƒå›´</a></li>
<li><a href="#%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B">é›†åˆç±»å‹</a></li>
<li><a href="#%E4%BD%8D%E5%AD%97%E6%AE%B5">ä½å­—æ®µ</a></li>
<li><a href="#%E6%95%B0%E7%BB%84">æ•°ç»„</a></li>
<li><a href="#%E5%BA%8F%E5%88%97">åºåˆ—</a></li>
<li><a href="#%E5%BC%80%E6%94%BE%E6%95%B0%E7%BB%84">å¼€æ”¾æ•°ç»„</a></li>
<li><a href="#%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">å¯å˜å‚æ•°</a></li>
<li><a href="#%E5%88%87%E7%89%87">åˆ‡ç‰‡</a></li>
<li><a href="#%E5%AF%B9%E8%B1%A1">å¯¹è±¡</a></li>
<li><a href="#%E5%85%83%E7%BB%84">å…ƒç»„</a></li>
<li><a href="#%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B">å¼•ç”¨å’ŒæŒ‡é’ˆç±»å‹</a></li>
<li><a href="#%E8%BF%87%E7%A8%8B%E7%B1%BB%E5%9E%8B">è¿‡ç¨‹ç±»å‹</a></li>
</ul>
</li>
<li><a href="#%E6%A8%A1%E5%9D%97">æ¨¡å—</a>
<ul>
<li><a href="#%E6%8E%92%E9%99%A4%E7%AC%A6%E5%8F%B7">æ’é™¤ç¬¦å·</a></li>
<li><a href="#from-%E8%AF%AD%E5%8F%A5">From è¯­å¥</a></li>
<li><a href="#include-%E6%A8%A1%E5%9D%97">Include æ¨¡å—</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                  </div>
                  </div>
                </div>
          </article>
        </div>

        
          <div class="nearby-post" style="padding: 24px 32px;">
            <div class="prev-post" style="float: left;">
              <div class="aaa" style="
              margin-bottom: 24px;
              color: #343a40;
              font-weight: lighter;text-align: left;">ä¸Šä¸€ç¯‡</div>
              <a href="https://3nd.xyz/post/2020-9-30-fluent-py-study-notes/">
                <h3 class="post-title" style="text-align: left;">
                  Fluent Python Study Notes
                </h3>
              </a>
            </div>
            <div class="next-posts" style="float: right;">
              <div class="aaa" style="
              margin-bottom: 24px;
              color: #343a40;
              font-weight: lighter; text-align: right;">ä¸‹ä¸€ç¯‡</div>
              <a href="https://3nd.xyz/post/2020-07-08-oracle-injection-learn-note/">
                <h3 class="post-title" style="
                text-align: right;">
                  Oracle æ“ä½œè¯­å¥åŠæ³¨å…¥æ€»ç»“
                </h3>
              </a>
            </div>
          </div>
          

                

                                <div class="site-footer">
  
  <a class="rss" href="https://3nd.xyz/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

    </div>
  </div>

  <script>
    hljs.highlightAll();

    let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

    // This should probably be throttled.
    // Especially because it triggers during smooth scrolling.
    // https://lodash.com/docs/4.17.10#throttle
    // You could do like...
    // window.addEventListener("scroll", () => {
    //    _.throttle(doThatStuff, 100);
    // });
    // Only not doing it here to keep this Pen dependency-free.

    window.addEventListener("scroll", event => {
      let fromTop = window.scrollY;

      mainNavLinks.forEach((link, index) => {
        let section = document.getElementById(decodeURI(link.hash).substring(1));
        let nextSection = null
        if (mainNavLinks[index + 1]) {
          nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
        }
        if (section.offsetTop <= fromTop) {
          if (nextSection) {
            if (nextSection.offsetTop > fromTop) {
              link.classList.add("current");
            } else {
              link.classList.remove("current");
            }
          } else {
            link.classList.add("current");
          }
        } else {
          link.classList.remove("current");
        }
      });
    });
  </script>
<script src="/media/view-support.js"></script>
<script>
  window.Lazyload.js(['https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js', '//cdn.jsdelivr.net/npm/leancloud-storage@3.13.2/dist/av-min.js'], function () {
    var pageview = window.pageview(AV, {
      appId: 'HRVNDkHV80Fpk9M8c5GQqjwy-gzGzoHsz',
      appKey: 'nsyqncNCSWSOkkns1wvDlUrh',
      appClass: 'Gridea',
    });
    $('.page-view').each(function () {
      var $this = $(this);
      var key = $this.attr('key');
      var title = $this.attr('title');
      pageview.increase(key, title, function(view) {
        $("[key='" + key +"']").text(view+' views');
      });
    });
  });
</script>

</body>

</html>